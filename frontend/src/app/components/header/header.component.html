<!-- Topbar Start -->
<div class="container-fluid top-bar bg-dark text-light px-0 wow fadeIn" data-wow-delay="0.1s" *ngIf="!isProductDetailPage">
    <div class="row gx-0 align-items-center d-none d-lg-flex">
        <div class="col-lg-6 px-5 text-start">
            <div class="d-inline-flex align-items-center">
                <!-- Hiển thị nút đăng ký/đăng nhập khi chưa đăng nhập -->
                <ng-container *ngIf="!currentUser">
                    <div class="auth-buttons">
                        <a class="btn auth-btn auth-btn-register me-3" routerLink="/Register">
                            <i class="fas fa-user-plus me-2"></i>Đăng ký
                        </a>
                        <a class="btn auth-btn auth-btn-login" routerLink="/Login">
                            <i class="fas fa-sign-in-alt me-2"></i>Đăng nhập
                        </a>
                    </div>
                </ng-container>
                
                <!-- Hiển thị thông tin user và nút đăng xuất khi đã đăng nhập -->
                <ng-container *ngIf="currentUser">
                    <div class="user-info d-flex align-items-center">
                        <div class="dropdown">
                            <span class="user-greeting me-3 dropdown-toggle" 
                                  role="button"
                                  data-bs-toggle="dropdown"
                                  aria-expanded="false">
                                <i class="fas fa-user-circle me-2"></i>
                                {{ currentUser.user.fullName }}
                            </span>
                            <ul class="dropdown-menu dropdown-menu-end user-dropdown">
                                <li>
                                    <a class="dropdown-item" routerLink="/order-history">
                                        <i class="fas fa-history me-2"></i>Lịch sử đơn hàng
                                    </a>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <a class="dropdown-item" (click)="logout()">
                                        <i class="fas fa-sign-out-alt me-2"></i>Đăng xuất
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>
        <div class="col-lg-6 px-5 text-end">
            <small>Follow us:</small>
            <div class="h-100 d-inline-flex align-items-center wrapper">
                <a class="btn-lg-square text-primary border-end rounded-0 icon icon-f" href=""><i class="fab fa-facebook-f"></i></a>
                <a class="btn-lg-square text-primary border-end rounded-0 icon icon-g" href=""><i class="fab fa-github"></i></a>
                <a class="btn-lg-square text-primary border-end rounded-0 icon icon-l" href=""><i class="fab fa-linkedin-in"></i></a>
                <a class="btn-lg-square text-primary pe-0 icon icon-i" href=""><i class="fab fa-instagram"></i></a>
            </div>
        </div>
    </div>
</div>
<!-- Topbar End -->

<!-- Navbar Start -->
<nav *ngIf="!isAuthPage" class="navbar navbar-expand-lg navbar-dark fixed-top py-lg-0 px-lg-5 wow fadeIn" data-wow-delay="0.1s" [ngClass]="{ 'navbar-dark-fixed': isProductDetailPage}">
    <a routerLink="/Home" class="navbar-brand ms-4 ms-lg-0">
        <h1 class="text-primary m-0">TZ BookStore</h1>
    </a>
    <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav mx-auto p-4 p-lg-0">
            <a class="nav-item nav-link" 
               routerLink="/Home" 
               routerLinkActive="active" 
               [routerLinkActiveOptions]="{exact: true}">Home</a>
            
            <a class="nav-item nav-link" 
               routerLink="/About" 
               routerLinkActive="active">About</a>
            
            <div class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" 
                   data-bs-toggle="dropdown">Categories</a>
                <div class="dropdown-menu m-0">
                    <a *ngFor="let category of categories"
                       class="dropdown-item"
                       [routerLink]="['/Products', category.category_id]"
                       routerLinkActive="active">
                       {{ category.category_name }}
                    </a>
                </div>
            </div>
            
            <a class="nav-item nav-link" 
               routerLink="/Contact" 
               routerLinkActive="active">Contact</a>
        </div>
        <div class="d-inline-flex align-items-center ms-lg-auto">
            <!-- Cart Button -->
            <a routerLink="/Shoppingcart" class="btn btn-light text-dark cart-btn ms-3 position-relative">
                <i class="fas fa-shopping-cart fa-lg"></i> 
                <span class="cart-text ms-2">Giỏ hàng</span>
                <!-- Badge -->
                <span *ngIf="cartCount > 0" class="badge bg-danger text-light rounded-pill position-absolute top-0 start-100 translate-middle">
                    {{ cartCount }}
                </span>
            </a>
        </div>
    </div>
</nav>
<!-- Navbar End -->
